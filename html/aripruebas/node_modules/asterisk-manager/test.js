const ami = require("asterisk-manager")("5038", "localhost", "admin", "C745k926", true);

ami.keepConnected();

ami.on("managerevent", function (evt) {
  console.log("datos del evnt managerevent ", evt);
});

ami.on("hangup", function (evt) {
  console.log("colgo =>", evt);
});
ami.on("confbridgejoin", function (evt) {});

ami.on("answer", function (evt) {
  //console.log("la llamada fue answer ==>>", evt);
});

// Listen for Action responses.
ami.on("response", function (evt) {
  //console.log("la respuesta es===> ", evt);
});

ami.action(
  {
    action: "originate",
    channel: "SIP/troncal1/02573175434104",
    context: "from-internal",
    exten: "2244",
    priority: "1",
    async: "true",
    timeout: "30000",
  },
  function (err, res) {
    console.log("este codigo no genero llamada");
    console.log("valor de err ", err);
    console.log("valor de resp ", res);
    //console.log(err || res);
  }
);
